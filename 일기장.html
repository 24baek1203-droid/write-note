<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸŒ¤ ëœë¤ ì¼ê¸°ì¥ & ë†€ëŸ¬ê°€ëŠ” í´ë”</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: #f5f6fa;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
      min-height: 100vh;
      margin: 0;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }

    .date-area {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .date, .weekday {
      font-size: 1.1rem;
      color: #555;
    }

    button.nav {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #4a90e2;
    }

    .weather {
      font-size: 1.2rem;
      color: #555;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    textarea {
      width: 90%;
      max-width: 500px;
      height: 150px;
      font-size: 1rem;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      outline: none;
      resize: none;
    }

    textarea:focus {
      border-color: #4a90e2;
      box-shadow: 0 0 4px rgba(74, 144, 226, 0.3);
    }

    button.save {
      margin-top: 15px;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button.save:hover {
      background-color: #357ab8;
    }

    .output {
      margin-top: 25px;
      width: 90%;
      max-width: 500px;
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .emoji {
      font-size: 26px;
      margin-top: 10px;
    }

    .travel {
      margin-top: 35px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 20px;
      width: 90%;
      max-width: 500px;
      text-align: center;
    }

    .travel img {
      width: 100%;
      border-radius: 10px;
      margin-top: 10px;
    }

    .days-left {
      font-size: 1rem;
      color: #333;
      margin-top: 10px;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ¤ ëœë¤ ì¼ê¸°ì¥</h1>

  <div class="date-area">
    <button class="nav" onclick="changeDate(-1)">â—€</button>
    <div class="date" id="date"></div>
    <div class="weekday" id="weekday"></div>
    <button class="nav" onclick="changeDate(1)">â–¶</button>
  </div>

  <div class="weather" id="weather"></div>

  <textarea id="diary" placeholder="ì˜¤ëŠ˜ì˜ ì¼ê¸°ë¥¼ ì ì–´ë³´ì„¸ìš”..."></textarea>
  <button class="save" onclick="saveDiary()">ğŸ’¾ ì €ì¥í•˜ê¸°</button>

  <div class="output" id="output"></div>

  <div class="travel" id="travel">
    <h2>ğŸ’ ë†€ëŸ¬ê°€ëŠ” í´ë”</h2>
    <p id="travelMessage">ë‚ ì”¨ì— ë”°ë¼ ì—¬í–‰ ê¸°ë¶„ì´ ë‹¬ë¼ì ¸ìš”!</p>
    <img id="travelImage" src="" alt="ì—¬í–‰ì§€ ì´ë¯¸ì§€" style="display:none;">
    <p class="days-left" id="daysLeft"></p>
  </div>

  <script>
    const weekdayNames = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];
    const weatherList = ["ë§‘ìŒ", "íë¦¼", "ë¹„", "ëˆˆ", "ì„ ì„ í•¨", "ë„ˆë¬´ ë”ì›€", "ì¶”ì›€"];

    let currentDate = randomDate();
    updateDisplay();

    function randomDate() {
      const year = 2025;
      const month = Math.floor(Math.random() * 12);
      const day = Math.floor(Math.random() * 28) + 1;
      return new Date(year, month, day);
    }

    function formatDate(date) {
      return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;
    }

    function updateDisplay() {
      const dateDiv = document.getElementById("date");
      const weekdayDiv = document.getElementById("weekday");
      const weatherDiv = document.getElementById("weather");
      const diaryBox = document.getElementById("diary");
      const outputDiv = document.getElementById("output");

      const dateStr = formatDate(currentDate);
      const weekday = weekdayNames[currentDate.getDay()];

      dateDiv.textContent = `${currentDate.getFullYear()}ë…„ ${currentDate.getMonth() + 1}ì›” ${currentDate.getDate()}ì¼`;
      weekdayDiv.textContent = `(${weekday}ìš”ì¼)`;

      let saved = JSON.parse(localStorage.getItem(dateStr)) || {};

      if (!saved.weather) saved.weather = weatherList[Math.floor(Math.random() * weatherList.length)];
      if (!saved.travelDate) saved.travelDate = randomDate();

      let emoji = "";
      if (["ë§‘ìŒ", "ì„ ì„ í•¨"].includes(saved.weather)) emoji = "ğŸ‘";
      else if (["ë„ˆë¬´ ë”ì›€", "ì¶”ì›€"].includes(saved.weather)) emoji = "ğŸ‘";

      weatherDiv.textContent = `ì˜¤ëŠ˜ì˜ ë‚ ì”¨: ${saved.weather}`;
      if (emoji) {
        const span = document.createElement("span");
        span.textContent = emoji;
        weatherDiv.appendChild(span);
      }

      diaryBox.value = saved.text || "";
      outputDiv.innerHTML = "";

      updateTravel(saved.weather, saved.travelDate);

      localStorage.setItem(dateStr, JSON.stringify(saved));
    }

    function saveDiary() {
      const dateStr = formatDate(currentDate);
      const diaryText = document.getElementById("diary").value.trim();
      const saved = JSON.parse(localStorage.getItem(dateStr)) || {};
      saved.text = diaryText;

      localStorage.setItem(dateStr, JSON.stringify(saved));
      const outputDiv = document.getElementById("output");

      let message = "";
      if (["ë§‘ìŒ", "ì„ ì„ í•¨"].includes(saved.weather)) {
        message = "ğŸ˜Š ì¢‹ì€ í•˜ë£¨ì˜€ë„¤ìš”!";
      } else if (["ë„ˆë¬´ ë”ì›€", "ì¶”ì›€"].includes(saved.weather)) {
        message = "ğŸ¥¶ ê·¸ë˜ë„ ìˆ˜ê³ í–ˆì–´ìš”!";
      } else {
        message = "ğŸŒ¦ ë‚´ì¼ì€ ë” ë‚˜ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”!";
      }

      outputDiv.innerHTML = `
        <h3>ğŸ“ ${saved.weather} ë‚ ì˜ ì¼ê¸°</h3>
        <p>${diaryText}</p>
        <div class="emoji">${message}</div>
      `;
    }

    function changeDate(direction) {
      currentDate.setDate(currentDate.getDate() + direction);
      updateDisplay();
    }

    function updateTravel(weather, travelDate) {
      const travelMsg = document.getElementById("travelMessage");
      const travelImg = document.getElementById("travelImage");
      const daysLeftDiv = document.getElementById("daysLeft");

      const travelImages = {
        good: [
          "https://images.unsplash.com/photo-1507525428034-b723cf961d3e",
          "https://images.unsplash.com/photo-1528909514045-2fa4ac7a08ba"
        ],
        bad: [
          "https://images.unsplash.com/photo-1501696461441-7e33e2e4c814",
          "https://images.unsplash.com/photo-1530207560100-8bca9a1c7caa"
        ],
        normal: [
          "https://images.unsplash.com/photo-1501785888041-af3ef285b470",
          "https://images.unsplash.com/photo-1521335629791-ce4aec67dd47"
        ]
      };

      let selectedImage = "";
      if (["ë§‘ìŒ", "ì„ ì„ í•¨"].includes(weather)) {
        travelMsg.textContent = "ë‚ ì”¨ê°€ ì¢‹ì•„ìš”! ğŸ˜ ë†€ëŸ¬ê°€ê¸° ë”± ì¢‹ì€ ë‚ ì´ì—ìš”!";
        selectedImage = travelImages.good[Math.floor(Math.random() * travelImages.good.length)];
      } else if (["ë„ˆë¬´ ë”ì›€", "ì¶”ì›€"].includes(weather)) {
        travelMsg.textContent = "ì˜¤ëŠ˜ì€ ë‚ ì”¨ê°€ ë³„ë¡œì˜ˆìš” ğŸ˜£ ì§‘ì½•ì´ ë” ë‚˜ì„ì§€ë„ ëª°ë¼ìš”...";
        selectedImage = travelImages.bad[Math.floor(Math.random() * travelImages.bad.length)];
      } else {
        travelMsg.textContent = "ê´œì°®ì€ ë‚ ì”¨ë„¤ìš”! ğŸš¶â€â™€ï¸ ê°€ë³ê²Œ ì‚°ì±…ì´ë¼ë„ ì–´ë•Œìš”?";
        selectedImage = travelImages.normal[Math.floor(Math.random() * travelImages.normal.length)];
      }

      travelImg.src = selectedImage;
      travelImg.style.display = "block";

      const diffTime = travelDate - currentDate;
      const daysLeft = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

      if (daysLeft > 0) {
        daysLeftDiv.textContent = `ğŸ¯ ë‹¤ìŒ ì—¬í–‰ê¹Œì§€ ${daysLeft}ì¼ ë‚¨ì•˜ì–´ìš”!`;
      } else if (daysLeft === 0) {
        daysLeftDiv.textContent = "ğŸ‰ ì˜¤ëŠ˜ì´ ë°”ë¡œ ì—¬í–‰ë‚ ì´ì—ìš”!";
      } else {
        daysLeftDiv.textContent = `âœˆï¸ ì—¬í–‰ ë‹¤ë…€ì˜¨ ì§€ ${Math.abs(daysLeft)}ì¼ ì§€ë‚¬ì–´ìš”!`;
      }
    }
  </script>
</body>
</html>
